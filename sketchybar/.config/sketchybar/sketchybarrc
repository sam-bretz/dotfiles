#!/bin/bash

# Cool color palette
BAR_COLOR=0xff1e2030
ITEM_BG_COLOR=0xff2d3748
ACCENT_COLOR=0xff7dd3fc
TEXT_COLOR=0xfff7fafc
MUTED_COLOR=0xff9ca3af

# Bar appearance
sketchybar --bar height=32 \
  blur_radius=30 \
  position=top \
  sticky=off \
  padding_left=10 \
  padding_right=10 \
  color=$BAR_COLOR

# Default item styles
sketchybar --default icon.font="JetBrainsMonoNL Nerd Font:Semibold:15.0" \
  icon.color=$TEXT_COLOR \
  label.font="SF Pro:Semibold:15.0" \
  label.color=$TEXT_COLOR \
  padding_left=5 \
  padding_right=5 \
  label.padding_left=4 \
  label.padding_right=4 \
  icon.padding_left=4 \
  icon.padding_right=4

# Aerospace workspaces
for i in {1..10}; do
  sketchybar --add item space.$i left \
    --set space.$i associated_space=$i \
    icon=$i \
    icon.color=$MUTED_COLOR \
    background.color=$ITEM_BG_COLOR \
    background.corner_radius=6 \
    background.height=24 \
    script="$CONFIG_DIR/plugins/space.sh" \
    --subscribe space.$i space_change
done

# Separator
sketchybar --add item left_separator left \
  --set left_separator icon="│" \
  icon.color=$MUTED_COLOR \
  padding_left=10 \
  padding_right=10

# Front app
sketchybar --add item front_app left \
  --set front_app script="$CONFIG_DIR/plugins/front_app.sh" \
  icon.color=$ACCENT_COLOR \
  label.color=$TEXT_COLOR \
  background.color=$ITEM_BG_COLOR \
  background.corner_radius=6 \
  background.height=24 \
  --subscribe front_app front_app_switched

# Clock
sketchybar --add item clock right \
  --set clock update_freq=10 \
  icon= \
  icon.color=$ACCENT_COLOR \
  script="$CONFIG_DIR/plugins/clock.sh" \
  background.color=$ITEM_BG_COLOR \
  background.corner_radius=6 \
  background.height=24

# Battery
sketchybar --add item battery right \
  --set battery script="$CONFIG_DIR/plugins/battery.sh" \
  update_freq=120 \
  background.color=$ITEM_BG_COLOR \
  background.corner_radius=6 \
  background.height=24 \
  --subscribe battery system_woke power_source_change

# WiFi
sketchybar --add item wifi right \
  --set wifi script="$CONFIG_DIR/plugins/wifi.sh" \
  icon=󰖩 \
  icon.color=$ACCENT_COLOR \
  background.color=$ITEM_BG_COLOR \
  background.corner_radius=6 \
  background.height=24 \
  --subscribe wifi wifi_change

echo "sketchybar configuration loaded.."

# Run the bar
sketchybar --update
